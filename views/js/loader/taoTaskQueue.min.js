function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}(function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash")):"function"==typeof define&&define.amd?define("core/format",["lodash"],factory):(global=global||self,global["core/format"]=factory(global._))})(this,function(_){'use strict';function format(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(void 0!==replacements[index]){switch(match){case"%d":replacement=+replacements[index];break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index];}message=message.replace(match,replacement)}return message},message)}_=_&&_.hasOwnProperty("default")?_["default"]:_;var pattern=/(%[sdj])/g;return format}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("core/promise",factory):(global=global||self,global["core/promise"]=factory())}(this,function(){'use strict';return Promise}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/format"),require("core/promise")):"function"==typeof define&&define.amd?define("core/logger/api",["lodash","core/format","core/promise"],factory):(global=global||self,global["core/logger/api"]=factory(global._,global["core/format"],global["core/promise"]))}(this,function(_,format,Promise){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,format=format&&format.hasOwnProperty("default")?format["default"]:format,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise;var defaultLevel="info",levels={fatal:60,error:50,warn:40,info:30,debug:20,trace:10},logQueue=[],getLevel=function(level){return"undefined"==typeof level||_.isString(level)&&!_.has(levels,level)?defaultLevel:_.isNumber(level)?_.findKey(levels,function(l){return l===level})||defaultLevel:level},getLevelNum=function(level){return _.isString(level)&&_.has(levels,level)?levels[level]:_.isNumber(level)&&_.contains(levels,level)?level:levels[defaultLevel]},checkMinLevel=function(minLevel,level){return getLevelNum(level)>=getLevelNum(minLevel)},loggerFactory=function loggerFactory(name,minLevel,fields){var baseRecord,logger;if(!_.isString(name)||_.isEmpty(name))throw new TypeError("A logger needs a name");return _.isPlainObject(minLevel)&&"undefined"==typeof field&&(fields=minLevel,minLevel=defaultLevel),baseRecord=_.defaults(fields||{},{name:name,pid:1,hostname:navigator.userAgent}),logger={log:function(level,recordFields,message){var record,err,rest=[],time=new Date().toISOString();if(!1!==loggerFactory.providers&&checkMinLevel(minLevel||defaultLevel,level))return _.isString(recordFields)||recordFields instanceof Error?(message=recordFields,recordFields={},rest=[].slice.call(arguments,2)):rest=[].slice.call(arguments,3),record={level:getLevel(level),v:0,time:time},checkMinLevel(levels.error,level)||message instanceof Error?(message instanceof Error?err=message:(message=_.isObject(message)?JSON.stringify(message):message,err=new Error(message)),record.msg=err.message,record.err=err):record.msg=format.apply(null,[message].concat(rest)),_.merge(record,baseRecord,recordFields),logQueue.push(record),loggerFactory.flush(),this},level:function level(value){return"undefined"==typeof value?getLevel(minLevel):(minLevel=getLevelNum(value),this)},child:function(childFields){return loggerFactory(name,minLevel,_.defaults(childFields,baseRecord))}},_.reduce(levels,function(target,level,levelName){return target[levelName]=_.partial(logger.log,level),target},logger)};return loggerFactory.levels=levels,loggerFactory.providers=!1,loggerFactory.load=function(providerConfigs){var self=this,modules=[];return this.providers=[],new Promise(function(resolve,reject){_.forEach(providerConfigs,function(providerConfig,providerName){modules.push(providerName)}),require(modules,function(){var loadedProviders=[].slice.call(arguments);_.forEach(loadedProviders,function(provider,moduleKey){try{self.register(provider,providerConfigs[modules[moduleKey]])}catch(err){reject(err)}}),self.flush(),resolve()},reject)})},loggerFactory.register=function(provider,providerConfig){if(!_.isPlainObject(provider)||!_.isFunction(provider.log))throw new TypeError("A log provider is an object with a log method");provider.checkMinLevel=checkMinLevel,_.isFunction(provider.setConfig)&&provider.setConfig(providerConfig),this.providers=this.providers||[],this.providers.push(provider)},loggerFactory.flush=function(){_.isArray(this.providers)&&0<this.providers.length&&(_.forEach(logQueue,function(message){_.forEach(loggerFactory.providers,function(provider){provider.log.call(provider,message)})}),logQueue=[])},loggerFactory.setDefaultLevel=function(level){return defaultLevel=getLevel(level),defaultLevel},loggerFactory}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("module"),require("core/logger/api")):"function"==typeof define&&define.amd?define("core/logger",["lodash","module","core/logger/api"],factory):(global=global||self,global["core/logger"]=factory(global._,global.module,global["core/logger/api"]))}(this,function(_,module,loggerFactory){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,module=module&&module.hasOwnProperty("default")?module["default"]:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var defaultConfig={level:loggerFactory.levels.warn,loggers:{"core/logger/console":{level:"warn"}}},config=_.defaults(module.config()||{},defaultConfig),logger=loggerFactory("core/logger");return loggerFactory.setDefaultLevel(config.level),loggerFactory.load(config.loggers),window.onerror=function(msg,url,line,col){logger.error("Caught[via window.onerror]: '"+msg+"' from "+url+":"+line+":"+col)},window.setTaoLogLevel=function(level){return loggerFactory.setDefaultLevel(level)},loggerFactory}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid"),require("core/logger")):"function"==typeof define&&define.amd?define("core/eventifier",["lodash","core/promise","lib/uuid","core/logger"],factory):(global=global||self,global["core/eventifier"]=factory(global._,global["core/promise"],global["lib/uuid"],global["core/logger"]))}(this,function(_,Promise,uuid,loggerFactory){'use strict';function getEventNames(eventNames){return!_.isString(eventNames)||_.isEmpty(eventNames)?[]:_(eventNames.split(/\s/g)).compact().uniq().value()}function getName(eventName){return-1<eventName.indexOf(".")?eventName.substr(0,eventName.indexOf(".")):eventName}function getNamespace(eventName){return-1<eventName.indexOf(".")?eventName.substr(eventName.indexOf(".")+1):"@"}function getHandlerObject(){return{before:[],between:[],after:[]}}function eventifier(target){var targetName,logger,stoppedEvents,eventHandlers={},getHandlers=function(eventName,type){var name=getName(eventName),ns=getNamespace(eventName);return type=type||"between",eventHandlers[ns]=eventHandlers[ns]||{},eventHandlers[ns][name]=eventHandlers[ns][name]||getHandlerObject(),eventHandlers[ns][name][type]},eventApi={on:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName).push(handler)}),this},off:function(eventNames){return _.forEach(getEventNames(eventNames),function(eventName){var offNamespaces,name=getName(eventName),ns=getNamespace(eventName);ns&&!name?"*"===ns?(offNamespaces={},offNamespaces["@"]=eventHandlers["@"],eventHandlers=offNamespaces):eventHandlers[ns]={}:_.forEach(eventHandlers,function(nsHandlers,namespace){nsHandlers[name]&&("@"===ns||ns===namespace)&&(nsHandlers[name]=getHandlerObject())})}),this},removeAllListeners:function(){return eventHandlers={},this},trigger:function(eventNames){function triggerAllHandlers(allHandlers,name,ns){var event={name:name,namespace:ns};allHandlers.before.length?triggerBefore(allHandlers.before,event).then(function(){triggerBetween(allHandlers,event)}).catch(function(err){logHandlerStop("before",event,err)}):triggerBetween(allHandlers,event)}function triggerBefore(handlers,event){var pHandlers,beforeArgs=args.slice();return beforeArgs.unshift(event),pHandlers=handlers.map(function(handler){var value=!shouldStop(event.name)&&handler.apply(self,beforeArgs);return!1===value?Promise.reject():value}),Promise.all(pHandlers)}function triggerBetween(allHandlers,event){shouldStop(event.name)?logHandlerStop("before",event):triggerHandlers(allHandlers.between,event).then(function(){triggerAfter(allHandlers.after,event)}).catch(function(err){logHandlerStop("on",event,err)})}function triggerAfter(handlers,event){shouldStop(event.name)?logHandlerStop("on",event):triggerHandlers(handlers,event).then(function(){shouldStop(event.name)&&logHandlerStop("after",event)}).catch(function(err){logHandlerStop("after",event,err)})}function triggerHandlers(handlers,event){var pHandlers;return pHandlers=handlers.map(function(handler){return shouldStop(event.name)?Promise.reject():handler.apply(self,args)}),Promise.all(pHandlers)}function logHandlerStop(stoppedIn,event,err){err instanceof Error&&logger.error(err),logger.trace({err:err,event:event.name,stoppedIn:stoppedIn},event.name+" handlers stopped")}function shouldStop(name){return stoppedEvents[name]}var self=this,args=[].slice.call(arguments,1);return stoppedEvents={},_.forEach(getEventNames(eventNames),function(eventName){var ns=getNamespace(eventName),name=getName(eventName),mergedHandlers=_(eventHandlers).filter(function(nsHandlers,namespace){return nsHandlers[name]&&("@"===ns||ns===namespace||"*"===namespace)}).reduce(function(acc,nsHandlers){return acc.before=acc.before.concat(nsHandlers[name].before),acc.between=acc.between.concat(nsHandlers[name].between),acc.after=acc.after.concat(nsHandlers[name].after),acc},getHandlerObject());logger.trace({event:eventName,args:args},"trigger %s",eventName),mergedHandlers&&triggerAllHandlers(mergedHandlers,name,ns)}),this},before:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"before").push(handler)}),this},after:function(eventNames,handler){return _.isFunction(handler)&&_.forEach(getEventNames(eventNames),function(eventName){getHandlers(eventName,"after").push(handler)}),this},stopEvent:function(name){_.isString(name)&&!_.isEmpty(name.trim())&&(stoppedEvents[name.trim()]=!0)},spread:function(destination,eventNames){var self=this;return destination&&_.isFunction(destination.trigger)&&(_.isString(eventNames)&&(eventNames=getEventNames(eventNames)),_.forEach(eventNames,function(eventName){self.on(eventName,function(){var args=[eventName].concat([].slice.call(arguments));destination.trigger.apply(destination,args)})})),this}};return target=target||{},targetName=target.name||target.id||target.serial||uuid(6),logger=eventifierLogger.child({target:targetName}),_(eventApi).functions().forEach(function(method){_.isFunction(target[method])&&eventifierLogger.warn("The target object has already a method named "+method,target),target[method]=function(){var args=[].slice.call(arguments);return eventApi[method].apply(target,args)}}),target}_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var eventifierLogger=loggerFactory("core/eventifier");return eventifier}),define("tpl!taoTaskQueue/component/listing/tpl/element",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+="<div class=\"task-element ",(helper=helpers.status)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.status,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\">\n    <div class=\"container-icon\">\n        <div class=\"shape\">\n            <span class=\"",(helper=helpers.icon)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.icon,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"/>\n        </div>\n    </div>\n    <div class=\"container-text\">\n        <div class=\"label\">",(helper=helpers.taskLabel)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.taskLabel,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n        <div class=\"time\">",(helper=helpers.time)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.time,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n    </div>\n    <div class=\"action-group action-top\">\n        <span data-role=\"remove\" class=\"icon-result-nok\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"remove",options):helperMissing.call(depth0,"__","remove",options)))+"\"/>\n    </div>\n    <div class=\"action-group action-bottom\">\n        <span data-role=\"notify\" class=\"icon-preview\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"notify me when done",options):helperMissing.call(depth0,"__","notify me when done",options)))+"\"/>\n        <span data-role=\"download\" class=\"icon-download\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"download",options):helperMissing.call(depth0,"__","download",options)))+"\"/>\n        <span data-role=\"redirect\" class=\"icon-external\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"go to resource",options):helperMissing.call(depth0,"__","go to resource",options)))+"\"/>\n        <span data-role=\"report\" class=\"icon-document\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"see report",options):helperMissing.call(depth0,"__","see report",options)))+"\"/>\n    </div>\n</div>",buffer})}),define("css!taoTaskQueue/component/listing/css/element",[],function(){}),define("taoTaskQueue/component/listing/element",["jquery","lodash","i18n","moment","ui/component","ui/hider","tpl!taoTaskQueue/component/listing/tpl/element","css!taoTaskQueue/component/listing/css/element"],function($,_,__,moment,component,hider,elementTpl){'use strict';var _defaults={},_allowedStatus=["in_progress","failed","completed"],_categoryMap={import:"import",export:"export",delivery_comp:"delivery",transfer:"connect",create:"magicwand",update:"edit",delete:"bin"},_statusIcon={in_progress:"property-advanced",completed:"result-ok",failed:"result-nok"},getLabelString=function(data){return data.taskLabel},getFormattedTime=function(from,elapsed){return moment.unix(from).from(moment.unix(parseInt(from,10)+parseInt(elapsed,10)))},getTimeString=function(data){switch(data.status){case"created":case"in_progress":return __("Started %s",getFormattedTime(data.createdAt,data.createdAtElapsed));case"completed":return __("Completed %s",getFormattedTime(data.updatedAt,data.updatedAtElapsed));case"failed":return __("Failed %s",getFormattedTime(data.updatedAt,data.updatedAtElapsed));default:return"";}},getIcon=function(data){var icon;if(!_.isPlainObject(data))throw new Error("invalid data");return icon=data.category&&_categoryMap[data.category]?_categoryMap[data.category]:data.status&&_statusIcon[data.status]?_statusIcon[data.status]:_statusIcon.in_progress,"icon-"+icon},taskElementApi={getId:function(){if(this.data&&this.data.id)return this.data.id},getStatus:function(){if(this.data&&this.data.status)return this.data.status},getData:function(){return this.data},update:function(data){var $container=this.getElement();return _.assign(this.data||{},data),$container.find(".shape > span").removeAttr("class").addClass(getIcon(this.data)),$container.find(".label").html(getLabelString(this.data)),$container.find(".time").html(getTimeString(this.data)),this.setStatus(this.data.status),hider.toggle($container.find(".action-bottom [data-role=\"download\"]"),this.data.hasFile),hider.toggle($container.find(".action-bottom [data-role=\"redirect\"]"),!!this.data.redirectUrl),this.trigger("update"),this},highlight:function(){var $container=this.getElement();return $container.addClass("highlight"),_.delay(function(){$container.removeClass("highlight")},500),this},setStatus:function(status){var self=this;if(!status)throw new Error("status should not be empty");if(-1!==["created"].indexOf(status)&&(status="in_progress"),-1===_allowedStatus.indexOf(status))throw new Error("unknown status "+status);return this.is(status)||(_.forEach(_.without(_allowedStatus,status),function(st){self.setState(st,!1)}),this.setState(status,!0)),this}};return function(config,data){var initConfig=_.defaults(config||{},_defaults);return component(taskElementApi).setTemplate(elementTpl).on("init",function(){this.data=data||{}}).on("render",function(){var self=this,$component=this.getElement();this.update(data),$component.find("[data-role=\"download\"]").click(function(){self.trigger("download")}),$component.find("[data-role=\"remove\"]").click(function(){self.trigger("remove")}),$component.find("[data-role=\"report\"]").click(function(){self.trigger("report")}),$component.find("[data-role=\"redirect\"]").click(function(){self.trigger("redirect")})}).init(initConfig)}}),define("tpl!taoTaskQueue/component/listing/tpl/report",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+="<div class=\"task-detail-element\">\n    <div class=\"detail-description\">\n        <span class=\"label\"></span>\n        <span class=\"time\"></span>\n    </div>\n    <div class=\"action-group action-top\">\n        <span data-role=\"close\" class=\"icon-compress\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"close report",options):helperMissing.call(depth0,"__","close report",options)))+"\"/>\n    </div>\n    <div class=\"detail-body\">\n    </div>\n    <div class=\"no-detail\">\n        <span class=\"message\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"No report available",options):helperMissing.call(depth0,"__","No report available",options)))+"</span>\n    </div>\n</div>",buffer})}),define("css!taoTaskQueue/component/listing/css/report",[],function(){}),define("taoTaskQueue/component/listing/report",["jquery","lodash","i18n","moment","ui/component","ui/hider","ui/report","tpl!taoTaskQueue/component/listing/tpl/report","css!taoTaskQueue/component/listing/css/report"],function($,_,__,moment,component,hider,reportFactory,elementTpl){'use strict';var _defaults={},reportElementApi={update:function(data){var $component=this.getElement();$component.find(".label").html(data.taskLabel),data.report&&_.isArray(data.report.children)&&data.report.children.length?(this.setState("noreport",!1),reportFactory({replace:!0},data.report.children[0]).render($component.find(".detail-body"))):this.setState("noreport",!0)}};return function(config,data){var initConfig=_.defaults(config||{},_defaults);return component(reportElementApi).setTemplate(elementTpl).on("render",function(){var self=this,$component=this.getElement();this.update(data),$component.find("[data-role=\"close\"]").click(function(){self.trigger("close")})}).init(initConfig)}}),define("tpl!taoTaskQueue/component/listing/tpl/list",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+="<div class=\"task-listing\">\n    <div class=\"box\">\n        <div class=\"arrow\"></div>\n        <div class=\"description\">",(helper=helpers.title)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.title,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n        <div class=\"empty-placeholder\">",(helper=helpers.emptyText)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.emptyText,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</div>\n        <ul class=\"task-list plain\"></ul>\n        <div class=\"clear-box\">\n            <a class=\"clear-all\" href=\"#\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Clear all finished tasks",options):helperMissing.call(depth0,"__","Clear all finished tasks",options)))+"\">"+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Clear all finished",options):helperMissing.call(depth0,"__","Clear all finished",options)))+"</a>\n        </div>\n        <div class=\"view-detail\"></div>\n    </div>\n</div>",buffer})}),define("tpl!taoTaskQueue/component/listing/tpl/elementWrapper",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",escapeExpression=this.escapeExpression;return buffer+="<li data-id=\"",(helper=helpers.id)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.id,stack1="function"===_typeof(helper)?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"\"></li>",buffer})}),define("css!taoTaskQueue/component/listing/css/list",[],function(){}),define("taoTaskQueue/component/listing/list",["jquery","lodash","i18n","ui/component","taoTaskQueue/component/listing/element","tpl!taoTaskQueue/component/listing/tpl/list","tpl!taoTaskQueue/component/listing/tpl/elementWrapper","css!taoTaskQueue/component/listing/css/list"],function($,_,__,component,listElementFactory,listTpl,elementWrapperTpl){'use strict';var _defaults={title:"Task List",emptyText:__("The list is currently empty.")},listApi={removeElement:function(listElement){return listElement.destroy(),this.getElement().find("ul li[data-id=\""+listElement.getId()+"\"]").remove(),this},insertElement:function(listElement){var id=listElement.getId(),$li=$(elementWrapperTpl({id:id}));return this.getElement().find("ul").prepend($li),listElement.render($li),this},setDetail:function(detailElement,show){return detailElement.render(this.getElement().find(".view-detail")),show&&this.setState("detail-view",!0),this},hideDetail:function(){return this.setState("detail-view",!1),this},scrollToTop:function(){return this.getElement().find(".task-list").get(0).scrollTo(0,0),this},animateInsertion:function(listElement){var $listElement=listElement.getElement(),$container=$listElement.parent();return $container.addClass("inserting"),$listElement.addClass("new-element"),_.delay(function(){$container.removeClass("inserting"),_.delay(function(){$listElement.removeClass("new-element")},400)},100),this}};return function(config){var initConfig=_.defaults(config||{},_defaults);return component(listApi).setTemplate(listTpl).on("render",function(){var self=this;this.getElement().find(".clear-all").on("click",function(e){e.preventDefault(),self.trigger("clearall")})}).init(initConfig)}}),define("tpl!taoTaskQueue/component/manager/tpl/manager",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var helper,options,buffer="",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression;return buffer+="<div class=\"task-manager-container\" title=\""+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Background tasks",options):helperMissing.call(depth0,"__","Background tasks",options)))+"\">\n</div>",buffer})}),define("css!taoTaskQueue/component/manager/css/manager",[],function(){}),define("taoTaskQueue/component/manager/manager",["jquery","lodash","i18n","layout/loading-bar","ui/hider","ui/component","ui/badge/badge","ui/component/alignable","ui/animable/absorbable/absorbable","ui/animable/pulsable/pulsable","taoTaskQueue/component/listing/element","taoTaskQueue/component/listing/report","taoTaskQueue/component/listing/list","tpl!taoTaskQueue/component/manager/tpl/manager","css!taoTaskQueue/component/manager/css/manager"],function($,_,__,loadingBar,hider,component,badgeFactory,makeAlignable,makeAbsorbable,makePulsable,listElementFactory,reportElementFactory,taskListFactory,managerTpl){'use strict';var getBadgeDataFromStatus=function(tasksStatuses){var total=0,data={loading:!1};if(tasksStatuses)return tasksStatuses.numberOfTasksInProgress&&(total+=parseInt(tasksStatuses.numberOfTasksInProgress,10),data.type="info",data.loading=0<tasksStatuses.numberOfTasksInProgress),tasksStatuses.numberOfTasksCompleted&&(total+=parseInt(tasksStatuses.numberOfTasksCompleted,10),data.type="success"),tasksStatuses.numberOfTasksFailed&&(total+=parseInt(tasksStatuses.numberOfTasksFailed,10),data.type="success"===data.type?"warning":"error"),data.value=total,data},getBadgeDataFromElements=function(elements){var statusMap={in_progress:"numberOfTasksInProgress",created:"numberOfTasksInProgress",failed:"numberOfTasksFailed",completed:"numberOfTasksCompleted"},stats={numberOfTasksFailed:0,numberOfTasksCompleted:0,numberOfTasksInProgress:0};return _.forEach(elements,function(element){var status=element.getStatus();statusMap[status]&&stats[statusMap[status]]++}),getBadgeDataFromStatus(stats)},_alignementConfig={initial:{hPos:"center",hOrigin:"center",vPos:"bottom",vOrigin:"top",hOffset:-156},showDetail:{hPos:"center",hOrigin:"center",vPos:"bottom",vOrigin:"top",hOffset:-277}},taskQueue={getTaskElements:function(){return this.taskElements},showDetail:function(taskData){var $component=this.getElement(),list=this.list,reportElement=reportElementFactory({replace:!0},taskData).on("close",function(){list.hideDetail(),list.alignWith($component,_alignementConfig.initial),this.destroy()});return list.setDetail(reportElement,!0),list.alignWith($component,_alignementConfig.showDetail),this},addNewTask:function(taskData,animate){var self=this,taskId=taskData.id,listElement=listElementFactory({},taskData).on("remove",function(){delete self.taskElements[taskId],self.list.removeElement(listElement),self.trigger("remove",taskId),self.trigger("listchange")}).on("report",function(){self.trigger("report",taskId)}).on("download",function(){self.trigger("download",taskId)}).on("redirect",function(){loadingBar.start(),self.hideList(),self.trigger("redirect",taskId)});return animate&&(this.list.is("hidden")&&this.list.show(),this.list.scrollToTop()),this.list.insertElement(listElement),this.taskElements[taskId]=listElement,this.trigger("listchange"),animate&&this.list.animateInsertion(listElement),this},selfUpdateBadge:function(){var badgeData=getBadgeDataFromElements(this.getTaskElements());return this.badge?this.badge.update(badgeData):this.badge=makePulsable(badgeFactory(badgeData)).render(this.getElement()),this},loadData:function(tasksData){var self=this,found=[];return _.forEach(tasksData,function(entry){var id=entry.id;self.taskElements[id]?(self.taskElements[id].update(entry),self.taskElements[id].getStatus()!==entry.status&&self.taskElements[id].highlight()):self.addNewTask(entry),found.push(id)}),_.forEach(_.difference(_.keys(self.taskElements),found),function(id){self.list.removeElement(self.taskElements[id]),delete self.taskElements[id]}),this.trigger("listchange"),this},pulse:function(){return this.badge&&this.badge.pulse(3),this},showList:function(){return this.list&&(this.list.show(),this.trigger("listshow")),this},hideList:function(){return this.list&&(this.list.hide(),this.trigger("listhide")),this},removeAllFinished:function(){var self=this;return _(this.taskElements).filter(function(element){return"completed"===element.getStatus()||"failed"===element.getStatus()}).forEach(function(element){delete self.taskElements[element.getId()],self.list.removeElement(element),self.trigger("listchange")}),this.trigger("listclearfinished"),this},selfUpdateClearButton:function(){var $clearAllBox=this.getElement().find(".clear-box"),finishedCount=_(this.taskElements).map(function(element){return element.getStatus()}).filter(function(status){return"completed"===status||"failed"===status}).size();return 0<finishedCount?hider.show($clearAllBox):hider.hide($clearAllBox),this}};return function(config,data){return data=data||{},makeAbsorbable(component(taskQueue)).setTemplate(managerTpl).on("destroy listhide",function(){$(document).off("click.task-queue-manager")}).on("init",function(){this.taskElements={},this.list=makeAlignable(taskListFactory()).init({title:__("Background tasks"),emptyText:__("There is currently no background task")})}).on("listshow",function(){var self=this,$component=this.getElement();$(document).off("click.task-queue-manager").on("click.task-queue-manager",function(e){$component.get(0)===e.target||$.contains($component.get(0),e.target)||self.list.is("hidden")||self.hideList()})}).on("listchange",function(){this.selfUpdateBadge(),this.selfUpdateClearButton()}).on("render",function(){var self=this,$trigger=this.getElement();this.list.render($trigger).moveBy(0,0).alignWith($trigger,_alignementConfig.initial).hide(),this.loadData(data),this.list.getElement().addClass("overflown-element").on("click",function(e){e.stopPropagation()}),this.list.on("clearall",function(){self.removeAllFinished()}),$trigger.on("click",function(){self.list.is("hidden")?self.showList():self.hideList()})}).init(config||{})}}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("context")):"function"==typeof define&&define.amd?define("util/url",["lodash","context"],factory):(global=global||self,global["util/url"]=factory(global._,global.context))}(this,function(_,context){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,context=context&&context.hasOwnProperty("default")?context["default"]:context;var parsers={absolute:/^(?:[a-z]+:)?\/\//i,base64:/^data:[^\/]+\/[^;]+(;charset=[\w]+)?;base64,/,query:/(?:^|&)([^&=]*)=?([^&]*)/g,url:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/};return{parse:function(url){var matches,keys=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","queryString","hash"],i=keys.length,parsed=Object.create({toString:function toString(){return this.source}});if(parsed.base64=parsers.base64.test(url),parsed.base64)parsed.source=url;else{for(matches=parsers.url.exec(url);i--;)parsed[keys[i]]=matches[i]||"";parsed.query={},parsed.queryString.replace(parsers.query,function($0,$1,$2){$1&&(parsed.query[$1]=$2)})}return parsed},isAbsolute:function(url){return"object"===_typeof(url)&&url.hasOwnProperty("source")?url.source!==url.relative:"string"==typeof url?parsers.absolute.test(url):void 0},isRelative:function(url){var absolute=this.isAbsolute(url);if("boolean"==typeof absolute)return!absolute},isBase64:function(url){return"object"===_typeof(url)&&url.hasOwnProperty("source")?url.base64:"string"==typeof url?parsers.base64.test(url):void 0},encodeAsXmlAttr:function(uri){return /[<>&']+/.test(uri)?encodeURIComponent(uri):uri},build:function(path,params){var url,hasQueryString,queryString="";return path&&(_.isString(path)&&(url=path),_.isArray(path)&&(url="",_.forEach(path,function(chunk){url+=/\/$/.test(url)&&/^\//.test(chunk)?chunk.substr(1):""===url||/\/$/.test(url)||/^\//.test(chunk)?chunk:"/"+chunk})),_.isPlainObject(params)&&(hasQueryString=-1<url.indexOf("?"),queryString=_.reduce(params,function(acc,value,key){return(!_.isEmpty(acc)||hasQueryString)&&(acc+="&"),"object"!==_typeof(value)||_.isArray(value)?acc+=encodeURIComponent(key)+"="+encodeURIComponent(value):_.forOwn(value,function(parameterValue,parameterName){acc+=encodeURIComponent(key)+"["+encodeURIComponent(parameterName)+"]="+encodeURIComponent(parameterValue)+"&"}),acc},queryString),!_.isEmpty(queryString)&&(!hasQueryString&&(url+="?"),url+=queryString))),url},route:function(action,controller,extension,params,rootUrl){var routeParts=[extension,controller,action];if(_.some(routeParts,function(value){return _.isEmpty(value)||!_.isString(value)}))throw new TypeError("All parts are required to build an URL");return rootUrl=rootUrl||context&&context.root_url,this.build([rootUrl].concat(routeParts),params)}}}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/eventifier")):"function"==typeof define&&define.amd?define("core/polling",["lodash","core/promise","core/eventifier"],factory):(global=global||self,global["core/polling"]=factory(global._,global["core/promise"],global["core/eventifier"]))}(this,function(_,Promise,eventifier){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier;var pollingFactory=function(config){var timer,promise,interval,max,iter,action,context,autoStart,_Mathabs=Math.abs,state={},startTimer=function(){timer=setTimeout(iteration,interval),state.stopped=!1,state.pending=!0},stopTimer=function(){clearTimeout(timer),timer=null,state.stopped=!0,state.pending=!1},iteration=function(){return max&&iter>=max?void polling.stop():void(iter=(iter||0)+1,state.processing=!0,state.pending=!1,polling.trigger("call"),action.call(context,polling),!promise&&!state.stopped&&(state.processing=!1,startTimer()))},polling={async:function(){var resolver={};return promise=new Promise(function(resolve,reject){resolver.resolve=resolve,resolver.reject=reject}),promise.then(function(){promise=null,state.processing=!1,state.stopped||startTimer(),polling.trigger("resolved")}).catch(function(){promise=null,state.processing=!1,polling.stop(),polling.trigger("rejected")}),polling.trigger("async",resolver),resolver},next:function(){var _next;return(state.stopped&&(iter=0),stopTimer(),max&&iter>=max)?this:(state.stopped=!1,promise?(_next=this.next.bind(this),promise.then(_next).catch(_next)):(this.trigger("next"),iteration()),this)},start:function(){return timer||(iter=0,startTimer(),this.trigger("start")),this},stop:function(){return stopTimer(),this.trigger("stop"),this},setInterval:function(value){return interval=_Mathabs(parseInt(value,10)||60000),this.trigger("setinterval",interval),this},getInterval:function(){return interval},setAction:function(fn){return action=fn,this.trigger("setaction",action),this},getAction:function(){return action},setContext:function(ctx){return context=ctx||this,this.trigger("setcontext",ctx),this},getContext:function(){return context},setMax:function(value){return max=_Mathabs(parseInt(value,10)||0),this},getMax:function(){return max},getIteration:function(){return iter||0},is:function(stateName){return!!state[stateName]}};return eventifier(polling),interval=60000,context=polling,action=null,state.stopped=!0,autoStart=!1,iter=0,_.isFunction(config)&&(polling.setAction(config),config=null),_.isObject(config)&&(polling.setAction(config.action),polling.setInterval(config.interval||arguments[1]),polling.setContext(config.context),polling.setMax(config.max),autoStart=!!config.autoStart),autoStart&&polling.start(),polling};return pollingFactory}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/eventifier"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/promiseQueue",["lodash","core/promise","core/eventifier","lib/uuid"],factory):(global=global||self,global["core/promiseQueue"]=factory(global._,global["core/promise"],global["core/eventifier"],global["lib/uuid"]))}(this,function(_,Promise,eventifier,uuid){'use strict';return _=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,eventifier=eventifier&&eventifier.hasOwnProperty("default")?eventifier["default"]:eventifier,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid,function(){var queue={},getId=function getId(){var id="promise-"+uuid(6);return"undefined"==typeof queue[id]?id:getId()};return{add:function(promise){return queue[getId()]=promise,this},getValues:function(){return _.values(queue)},clear:function(){return queue={},this},serie:function(promiseFn){var id=getId(),currentQueue=this.getValues(),emitter=eventifier();return queue[id]=new Promise(function(resolve){emitter.on("fulfilled",resolve)}),Promise.all(currentQueue).then(function(){if(_.isFunction(promiseFn))return promiseFn()}).then(function(data){return emitter.trigger("fulfilled"),delete queue[id],data}).catch(function(err){throw queue={},err})}}}}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/promiseQueue"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/localstorage",["lodash","core/promise","core/promiseQueue","lib/uuid"],factory):(global=global||self,global["core/store/localstorage"]=factory(global._,global["core/promise"],global["core/promiseQueue"],global["lib/uuid"]))}(this,function(_,Promise,promiseQueue,uuid){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var storage=window.localStorage,knownStoresName="index",idStoreName="id",writingQueue=promiseQueue(),setEntry=function(storeName,key,value){return new Promise(function(resolve,reject){try{storage.setItem("tao-store-"+storeName+"."+key,JSON.stringify(value)),resolve(!0)}catch(ex){reject(ex)}})},getEntry=function(storeName,key){return new Promise(function(resolve,reject){var value;try{value=storage.getItem("tao-store-"+storeName+"."+key),null===value?resolve():resolve(JSON.parse(value))}catch(ex){reject(ex)}})},getKnownStores=function(){return getEntry(knownStoresName,"stores")},registerStore=function(storeName){return getKnownStores().then(function(stores){return stores=stores||{},stores[storeName]={name:storeName,lastOpen:Date.now()},setEntry(knownStoresName,"stores",stores)})},unregisterStore=function(storeName){return getKnownStores().then(function(stores){return stores=stores||{},delete stores[storeName],setEntry(knownStoresName,"stores",stores)})},localStorageBackend=function(storeName){var name,registered=!1,openStore=function(){return registered?Promise.resolve():registerStore(storeName).then(function(){registered=!0})};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return name="tao-store-"+storeName+".",{getItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return getEntry(storeName,key)})})},setItem:function(key,value){return writingQueue.serie(function(){return openStore().then(function(){return setEntry(storeName,key,value)})})},removeItem:function(key){return writingQueue.serie(function(){return openStore().then(function(){return storage.removeItem(name+key),!0})})},getItems:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).reduce(function(acc,key){var value,exposedKey=key.replace(name,"");try{value=storage.getItem(key),null!==value&&(acc[exposedKey]=JSON.parse(value))}catch(ex){acc[exposedKey]=null}return acc},{})})})},clear:function(){var keyPattern=new RegExp("^"+name);return writingQueue.serie(function(){return openStore().then(function(){return _(storage).map(function(entry,index){return storage.key(index)}).filter(function(key){return keyPattern.test(key)}).forEach(function(key){storage.removeItem(key)}),!0})})},removeStore:function(){return this.clear().then(function(){return unregisterStore(storeName)})}}};return localStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(stores){var removing=_(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store&&store.name?localStorageBackend(store.name).removeStore():Promise.resolve()}).value();return Promise.all(removing)})},localStorageBackend.getAll=function(validate){return getKnownStores().then(function(stores){return _(stores).filter(function(store,storeName){return!validate||validate(storeName,store)}).map(function(store){return store.name}).value()})},localStorageBackend.getStoreIdentifier=function(){var idStore=localStorageBackend(idStoreName);return idStore.getItem(idStoreName).then(function(id){return _.isEmpty(id)?(id=uuid(),idStore.setItem(idStoreName,id).then(function(){return id})):id})},localStorageBackend}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/store/idbstore"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/indexeddb",["lodash","core/promise","lib/store/idbstore","lib/uuid"],factory):(global=global||self,global["core/store/indexeddb"]=factory(global._,global["core/promise"],global["lib/store/idbstore"],global["lib/uuid"]))}(this,function(_,Promise,IDBStore,uuid){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,IDBStore=IDBStore&&IDBStore.hasOwnProperty("default")?IDBStore["default"]:IDBStore,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var knownStores,idStoreName="id",isIndexedDB2="getAll"in IDBObjectStore.prototype,openStore=function(storeName){return new Promise(function(resolve,reject){var store=new IDBStore({dbVersion:1,storeName:storeName,storePrefix:"tao-store-",keyPath:"key",autoIncrement:!0,onStoreReady:function(){store.db.onversionchange=function(e){e&&e.newVersion||store.db.close()},resolve(store)},onError:reject})})},setEntry=function(store,key,value){return new Promise(function(resolve,reject){store.put({key:key,value:value},function(returnKey){resolve(returnKey===key)},reject)})},getEntry=function(store,key){return new Promise(function(resolve,reject){store.get(key,function(entry){return entry&&"undefined"!=typeof entry.value?void resolve(entry.value):resolve(entry)},reject)})},getEntries=function(store){return new Promise(function(resolve,reject){var success=function(entries){return _.isArray(entries)?void resolve(_.reduce(entries,function(acc,entry){return entry.key&&entry.value&&(acc[entry.key]=entry.value),acc},{})):resolve({})};store.getAll(success,reject)})},removeEntry=function(store,key){return new Promise(function(resolve,reject){store.remove(key,function(result){resolve(!1!==result)},reject)})},getKnownStores=function(){return knownStores||(knownStores=openStore("index")),knownStores},registerStore=function(storeName){return getKnownStores().then(function(store){return setEntry(store,storeName,{name:storeName,lastOpen:Date.now()})})},unregisterStore=function(storeName){return getKnownStores().then(function(store){return removeEntry(store,storeName)})},deleteStore=function(store,storeName){return new Promise(function(resolve,reject){var success=function(){unregisterStore(storeName).then(function(){resolve(!0)}).catch(reject)};isIndexedDB2?store.deleteDatabase(success,reject):store.clear(success,reject)})},indexDbBackend=function(storeName){var innerStore,writePromise,getStore=function(){return innerStore||(innerStore=openStore(storeName).then(function(store){return registerStore(storeName).then(function(){return Promise.resolve(store)})})),innerStore},ensureSerie=function(getWritingPromise){return writePromise?new Promise(function(resolve,reject){var runWrite=function(){var p=getWritingPromise();writePromise=p,p.then(resolve).catch(reject)};writePromise.then(runWrite).catch(runWrite)}):(writePromise=getWritingPromise(),writePromise)};if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return{getItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return getEntry(store,key)})})},setItem:function(key,value){return ensureSerie(function(){return getStore().then(function(store){return setEntry(store,key,value)})})},removeItem:function(key){return ensureSerie(function(){return getStore().then(function(store){return removeEntry(store,key)})})},getItems:function(){return ensureSerie(function(){return getStore().then(function(store){return getEntries(store)})})},clear:function(){return ensureSerie(function(){return getStore().then(function(store){return new Promise(function(resolve,reject){store.clear(function(){resolve(!0)},reject)})})})},removeStore:function(){return ensureSerie(function(){return getStore().then(function(store){return deleteStore(store,storeName)})})}}};return indexDbBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),getKnownStores().then(function(store){return new Promise(function(resolve,reject){function cleanUp(entries){var all=[];_.forEach(entries,function(entry){var storeName=entry&&entry.key;storeName&&all.push(openStore(storeName).then(function(storeToRemove){if(!validate||validate(storeName,entry.value))return deleteStore(storeToRemove,storeName)}))}),Promise.all(all).then(resolve).catch(reject)}store.getAll(cleanUp,reject)})})},indexDbBackend.getAll=function(validate){return _.isFunction(validate)||(validate=function(){return!0}),getKnownStores().then(function(store){return new Promise(function(resolve,reject){store.getAll(function(entries){var storeNames=_(entries).filter(function(entry){return entry&&entry.key&&validate(entry.key,entry.value)}).map(function(entry){return entry.key}).value();return resolve(storeNames)},reject)})})},indexDbBackend.getStoreIdentifier=function(){return openStore(idStoreName).then(function(store){return getEntry(store,idStoreName).then(function(id){return _.isEmpty(id)?(id=uuid(),setEntry(store,idStoreName,id).then(function(){return id})):id})})},indexDbBackend}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("lib/uuid")):"function"==typeof define&&define.amd?define("core/store/memory",["lodash","core/promise","lib/uuid"],factory):(global=global||self,global["core/store/memory"]=factory(global._,global["core/promise"],global["lib/uuid"]))}(this,function(_,Promise,uuid){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,uuid=uuid&&uuid.hasOwnProperty("default")?uuid["default"]:uuid;var idStore,memoryStore={},memoryStorageBackend=function(storeName){if(_.isEmpty(storeName)||!_.isString(storeName))throw new TypeError("The store name is required");return memoryStore[storeName]=memoryStore[storeName]||{},{getItem:function(key){return _.isPlainObject(memoryStore[storeName])?Promise.resolve(memoryStore[storeName][key]):Promise.resolve()},setItem:function(key,value){return _.isPlainObject(memoryStore[storeName])||(memoryStore[storeName]={}),memoryStore[storeName][key]=value,Promise.resolve(!0)},removeItem:function(key){return memoryStore[storeName]=_.omit(memoryStore[storeName],key),Promise.resolve("undefined"==typeof memoryStore[storeName][key])},getItems:function(){return Promise.resolve(memoryStore[storeName])},clear:function(){return memoryStore[storeName]={},Promise.resolve(!0)},removeStore:function(){return memoryStore=_.omit(memoryStore,storeName),Promise.resolve("undefined"==typeof memoryStore[storeName])}}};return memoryStorageBackend.removeAll=function(validate){return _.isFunction(validate)||(validate=null),memoryStore=_.omit(memoryStore,function(store,storeName){return!validate||validate(storeName)}),Promise.resolve(!0)},memoryStorageBackend.getAll=function(validate){var storeNames=[];return _.isFunction(validate)||(validate=null),storeNames=_(memoryStore).map(function(store,storeName){return storeName}).filter(function(storeName){return!validate||validate(storeName)}).value(),Promise.resolve(storeNames)},memoryStorageBackend.getStoreIdentifier=function(){return _.isEmpty(idStore)&&(idStore=uuid()),Promise.resolve(idStore)},memoryStorageBackend}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("moment"),require("module"),require("core/logger"),require("core/promise"),require("core/store/localstorage"),require("core/store/indexeddb"),require("core/store/memory")):"function"==typeof define&&define.amd?define("core/store",["lodash","moment","module","core/logger","core/promise","core/store/localstorage","core/store/indexeddb","core/store/memory"],factory):(global=global||self,global["core/store"]=factory(global._,global.moment,global.module,global["core/logger"],global["core/promise"],global["core/store/localstorage"],global["core/store/indexeddb"],global["core/store/memory"]))}(this,function(_,moment,module,loggerFactory,Promise,localStorageBackend,indexedDBBackend,memoryBackend){'use strict';_=_&&_.hasOwnProperty("default")?_["default"]:_,moment=moment&&moment.hasOwnProperty("default")?moment["default"]:moment,module=module&&module.hasOwnProperty("default")?module["default"]:module,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,localStorageBackend=localStorageBackend&&localStorageBackend.hasOwnProperty("default")?localStorageBackend["default"]:localStorageBackend,indexedDBBackend=indexedDBBackend&&indexedDBBackend.hasOwnProperty("default")?indexedDBBackend["default"]:indexedDBBackend,memoryBackend=memoryBackend&&memoryBackend.hasOwnProperty("default")?memoryBackend["default"]:memoryBackend;var store,supportsIndexedDB=!1,dectectionDone=!1,quotaChecked=!1,backendApi=["removeAll","getAll","getStoreIdentifier"],storeApi=["getItem","setItem","removeItem","getItems","clear","removeStore"],logger=loggerFactory("core/store"),config=_.defaults(module.config()||{},{lowSpaceRatio:80,invalidation:{staled:"P2W",oldster:"P2M"}}),isIndexDBSupported=function(){return dectectionDone?Promise.resolve(supportsIndexedDB):new Promise(function(resolve){var test,indexedDB,done=function(result){return supportsIndexedDB=!!result,dectectionDone=!0,resolve(supportsIndexedDB)};try{if(indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,!indexedDB)return done(!1);test=indexedDB.open("__feature_test",1),test.onsuccess=function(){if(test.result)return test.result.close(),done(!0)},test.onerror=function(e){return e.preventDefault(),done(!1),!1}}catch(err){done(!1)}})},checkQuotas=function(){!quotaChecked&&"storage"in window.navigator&&window.navigator.storage.estimate&&window.navigator.storage.estimate().then(function(estimate){var usedRatio=0;_.isNumber(estimate.usage)&&_.isNumber(estimate.quota)&&0<estimate.quota&&(usedRatio=estimate.usage/estimate.quota,usedRatio>config.lowSpaceRatio?(logger.warn("The browser storage is getting low "+usedRatio.toFixed(2)+"% used",estimate),logger.warn("We will attempt to clean oldster databases in persistent backends"),store.cleanUpSpace(config.invalidation.oldster,[],localStorageBackend),isIndexDBSupported&&store.cleanUpSpace(config.invalidation.oldster,[],indexedDBBackend)):logger.debug("Browser storage estimate : "+usedRatio.toFixed(2)+"% used",estimate))}).catch(function(err){logger.warn("Unable to retrieve quotas : "+err.message)}),quotaChecked=!0},isBackendApiValid=function(backend){return _.all(backendApi,function(method){return _.isFunction(backend[method])})},isStorageApiValid=function(storage){return _.all(storeApi,function(method){return _.isFunction(storage[method])})},loadBackend=function(preselectedBackend){return isIndexDBSupported().then(function(){var backend=preselectedBackend||(supportsIndexedDB?indexedDBBackend:localStorageBackend);return _.isFunction(backend)?isBackendApiValid(backend)?(backend!==memoryBackend&&checkQuotas(),backend):Promise.reject(new TypeError("This backend doesn't comply with the store backend API")):Promise.reject(new TypeError("No backend, no storage!"))})};store=function(storeName,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){var storeInstance=backend(storeName);return isStorageApiValid(storeInstance)?storeInstance:Promise.reject(new TypeError("The store doesn't comply with the Storage interface"))})},store.backends={localStorage:localStorageBackend,indexedDB:indexedDBBackend,memory:memoryBackend},store.removeAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.removeAll(validate)})},store.cleanUpSpace=function(since,storeNamePattern,preselectedBackend){var tsThreshold,invalidate=function(storeName,storeEntry){return!!(storeName&&storeEntry)&&(!(storeNamePattern instanceof RegExp)||storeNamePattern.test(storeName))&&_.isNumber(storeEntry.lastOpen)&&_.isNumber(tsThreshold)&&storeEntry.lastOpen<=tsThreshold};return _.isNumber(since)&&0<since?tsThreshold=since:(!_.isString(since)&&(since=config.invalidation.oldster),tsThreshold=moment().subtract(moment.duration(since)).valueOf()),logger.info("Trying to remove stores lastly opened before "+tsThreshold+"("+since+")"),store.removeAll(invalidate,preselectedBackend)},store.getAll=function(validate,preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getAll(validate)})},store.getIdentifier=function(preselectedBackend){return loadBackend(preselectedBackend).then(function(backend){return backend.getStoreIdentifier()})};var store$1=store;return store$1}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/promise"),require("core/store")):"function"==typeof define&&define.amd?define("core/tokenStore",["lodash","core/promise","core/store"],factory):(global=global||self,global["core/tokenStore"]=factory(global._,global["core/promise"],global["core/store"]))}(this,function(_,Promise,store){'use strict';function tokenStoreFactory(options){var config=_.defaults(options||{},defaultConfig),getStore=function(){return store("tokenStore.tokens",store.backends.memory)};return{dequeue:function(){var self=this;return self.getIndex().then(function(latestIndex){var key=_.first(latestIndex);return key?getStore().then(function(storage){return storage.getItem(key)}).then(function(token){return self.remove(key).then(function(){return token})}):Promise.resolve()})},enqueue:function(token){var self=this;return _.isString(token)&&(token={value:token,receivedAt:Date.now()}),getStore().then(function(storage){return storage.setItem(token.value,token)}).then(function(updated){return!!updated&&self.enforceMaxSize().then(function(){return!0})})},getIndex:function(){return this.getTokens().then(function(tokens){return _.chain(tokens).values().sort(function(t1,t2){return t1.receivedAt-t2.receivedAt}).map("value").value()})},has:function(key){return this.getIndex().then(function(latestIndex){return _.contains(latestIndex,key)})},remove:function(key){return this.has(key).then(function(result){return!!result&&getStore().then(function(storage){return storage.removeItem(key)})})},clear:function(){return getStore().then(function(storage){return storage.clear()})},getTokens:function(){return getStore().then(function(storage){return storage.getItems()})},getSize:function(){return this.getIndex().then(function(latestIndex){return latestIndex.length})},setMaxSize:function(size){var self=this;_.isNumber(size)&&0<size&&size!==config.maxSize&&(config.maxSize=size,self.enforceMaxSize())},enforceMaxSize:function(){var self=this;return this.getIndex().then(function(latestIndex){var keysToRemove,excess=latestIndex.length-config.maxSize;return!(0<excess)||(keysToRemove=latestIndex.slice(0,excess),Promise.all(_.map(keysToRemove,function(key){return self.remove(key)})))})},checkExpiry:function(token){return!(Date.now()-token.receivedAt>config.tokenTimeLimit)||this.remove(token.value)},expireOldTokens:function(){var self=this;return self.getTokens().then(function(tokens){return _.reduce(tokens,function(previousPromise,nextToken){return previousPromise.then(function(){return self.checkExpiry(nextToken)})},Promise.resolve()).then(function(){return!0})})}}}_=_&&_.hasOwnProperty("default")?_["default"]:_,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,store=store&&store.hasOwnProperty("default")?store["default"]:store;var defaultConfig={maxSize:6,tokenTimeLimit:1440000};return tokenStoreFactory}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("module"),require("core/tokenStore"),require("core/promise"),require("core/promiseQueue")):"function"==typeof define&&define.amd?define("core/tokenHandler",["lodash","module","core/tokenStore","core/promise","core/promiseQueue"],factory):(global=global||self,global["core/tokenHandler"]=factory(global._,global.module,global["core/tokenStore"],global["core/promise"],global["core/promiseQueue"]))}(this,function(_,module,tokenStoreFactory,Promise,promiseQueue){'use strict';function tokenHandlerFactory(options){var tokenStore;return _.isString(options)&&(options={initialToken:options}),options=_.defaults({},options,defaults),tokenStore=tokenStoreFactory(options),{getToken:function(){var self=this,initialToken=options.initialToken,getFirstTokenValue=function(){return tokenStore.dequeue().then(function(currentToken){return currentToken?currentToken.value:null})};return initialToken?(options.initialToken=null,Promise.resolve(initialToken)):tokenStore.expireOldTokens().then(function(){return tokenStore.getSize()}).then(function(queueSize){return 0<queueSize?getFirstTokenValue():clientConfigFetched?Promise.reject(new Error("No tokens available. Please refresh the page.")):self.getClientConfigTokens().then(getFirstTokenValue)})},setToken:function(newToken){return tokenStore.enqueue(newToken)},getClientConfigTokens:function(){var self=this,clientTokens=_.map(module.config().tokens,function(serverToken){return{value:serverToken,receivedAt:Date.now()}});return clientConfigFetched=!0,Promise.resolve(clientTokens).then(function(newTokens){var setTokenQueue=promiseQueue();return _.forEach(newTokens,function(token){setTokenQueue.serie(function(){return self.setToken(token)})}),setTokenQueue.serie(function(){return!0})})},clearStore:function(){return tokenStore.clear()},getQueueLength:function(){return tokenStore.getSize()},setMaxSize:function(size){tokenStore.setMaxSize(size)}}}_=_&&_.hasOwnProperty("default")?_["default"]:_,module=module&&module.hasOwnProperty("default")?module["default"]:module,tokenStoreFactory=tokenStoreFactory&&tokenStoreFactory.hasOwnProperty("default")?tokenStoreFactory["default"]:tokenStoreFactory,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue;var clientConfigFetched=!1,defaults={maxSize:6,tokenTimeLimit:1440000};return tokenHandlerFactory}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("jquery"),require("lodash"),require("i18n"),require("module"),require("context"),require("core/promise"),require("core/promiseQueue"),require("core/tokenHandler"),require("core/logger")):"function"==typeof define&&define.amd?define("core/request",["jquery","lodash","i18n","module","context","core/promise","core/promiseQueue","core/tokenHandler","core/logger"],factory):(global=global||self,global["core/request"]=factory(global.$,global._,global.__,global.module,global.context,global["core/promise"],global["core/promiseQueue"],global["core/tokenHandler"],global["core/logger"]))}(this,function($,_,__,module,context,Promise,promiseQueue,tokenHandlerFactory,loggerFactory){'use strict';function request(options){function runRequest(){var computeHeaders=function(){var headers=_.extend({},options.headers);return options.noToken?Promise.resolve(headers):tokenHandler.getToken().then(function(token){return headers["X-CSRF-Token"]=token||"none",headers})},setTokenFromXhr=function(xhr){var token;return _.isFunction(xhr.getResponseHeader)&&(token=xhr.getResponseHeader("X-CSRF-Token"),logger.debug("received %s header %s","X-CSRF-Token",token),token)?tokenHandler.setToken(token):Promise.resolve()};return computeHeaders().then(function(customHeaders){return new Promise(function(resolve,reject){var noop;$.ajax({url:options.url,method:options.method||"GET",headers:customHeaders,data:options.data,contentType:options.contentType||noop,dataType:options.dataType||"json",async:!0,timeout:1e3*options.timeout||1e3*context.timeout||0,beforeSend:function beforeSend(){_.isEmpty(customHeaders)||logger.debug("sending %s header %s","X-CSRF-Token",customHeaders&&customHeaders["X-CSRF-Token"])},global:!options.background}).done(function(response,status,xhr){setTokenFromXhr(xhr).then(function(){return 204===xhr.status||response&&204===response.errorCode||"nocontent"===status?resolve():403===xhr.status||response&&403===response.errorCode?reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState)):response&&!0===response.success?resolve(response):void reject(createError(response,__("The server has sent an empty response"),xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})}).fail(function(xhr,textStatus,errorThrown){var response;try{response=JSON.parse(xhr.responseText)}catch(parseErr){response=xhr.responseText}response=_.defaults(response,{success:!1,source:"network",cause:options.url,purpose:"proxy",context:this,code:xhr.status,sent:0<xhr.readyState,type:"error",message:errorThrown||__("An error occurred!")}),setTokenFromXhr(xhr).then(function(){reject(createError(response,xhr.status+" : "+xhr.statusText,xhr.status,0<xhr.readyState))}).catch(function(error){logger.error(error),reject(createError(response,error,xhr.status,0<xhr.readyState))})})})})}if(module.config().noToken&&(options.noToken=!0),_.isEmpty(options.url))throw new TypeError("At least give a URL...");return tokenHandler.getQueueLength().then(function(queueLength){return!0===options.noToken?runRequest():options.sequential||1===queueLength?queue.serie(runRequest):runRequest()})}$=$&&$.hasOwnProperty("default")?$["default"]:$,_=_&&_.hasOwnProperty("default")?_["default"]:_,__=__&&__.hasOwnProperty("default")?__["default"]:__,module=module&&module.hasOwnProperty("default")?module["default"]:module,context=context&&context.hasOwnProperty("default")?context["default"]:context,Promise=Promise&&Promise.hasOwnProperty("default")?Promise["default"]:Promise,promiseQueue=promiseQueue&&promiseQueue.hasOwnProperty("default")?promiseQueue["default"]:promiseQueue,tokenHandlerFactory=tokenHandlerFactory&&tokenHandlerFactory.hasOwnProperty("default")?tokenHandlerFactory["default"]:tokenHandlerFactory,loggerFactory=loggerFactory&&loggerFactory.hasOwnProperty("default")?loggerFactory["default"]:loggerFactory;var tokenHandler=tokenHandlerFactory(),queue=promiseQueue(),logger=loggerFactory("core/request"),createError=function(response,fallbackMessage,httpCode,httpSent){var err;return err=response&&response.errorCode?new Error(response.errorCode+" : "+(response.errorMsg||response.errorMessage||response.error)):new Error(fallbackMessage),err.response=response,err.sent=httpSent,httpCode&&(err.code=httpCode),err};return request}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("lodash"),require("core/request")):"function"==typeof define&&define.amd?define("core/dataProvider/request",["lodash","core/request"],factory):(global=global||self,global["core/dataProvider/request"]=factory(global._,global["core/request"]))}(this,function(_,coreRequest){'use strict';function request(url,data,method,headers,background,noToken){return coreRequest({url:url,data:data,method:method,headers:headers,background:background,noToken:!1!==noToken}).then(function(response){if(!_.isUndefined(response)){if(response.success)return response.data;throw new Error(response.data)}})}return _=_&&_.hasOwnProperty("default")?_["default"]:_,coreRequest=coreRequest&&coreRequest.hasOwnProperty("default")?coreRequest["default"]:coreRequest,request}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/regexEscape",factory):(global=global||self,global["util/regexEscape"]=factory())}(this,function(){'use strict';return function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory(require("util/regexEscape")):"function"==typeof define&&define.amd?define("util/wrapLongWords",["util/regexEscape"],factory):(global=global||self,global["util/wrapLongWords"]=factory(global["util/regexEscape"]))}(this,function(regexEscape){'use strict';function wrapLongWords(str,threshold){str=str.toString().replace(/([\w])</g,"$1 <");for(var cut,chunkExp=new RegExp(".{1,"+threshold+"}","g"),longWords=str.match(new RegExp("[\\S]{"+threshold+",}","g"))||[],i=longWords.length;i--;)cut=getCutTerm(longWords[i],chunkExp),str=str.replace(new RegExp(regexEscape(longWords[i]),"g"),cut);return str}regexEscape=regexEscape&&regexEscape.hasOwnProperty("default")?regexEscape["default"]:regexEscape;var getCutTerm=function(longWord,chunkExp){for(var cutTerms=longWord.match(chunkExp),i=cutTerms.length,oldFirst="",newFirst="",offenders=[".",":",";"];i--;)newFirst=cutTerms[i].charAt(0),-1<offenders.indexOf(newFirst)&&(cutTerms[i]=cutTerms[i].substr(1)),-1<offenders.indexOf(oldFirst)&&(cutTerms[i]+=oldFirst),oldFirst=newFirst;return cutTerms.join(" ")};return wrapLongWords}),function(global,factory){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("util/encode",factory):(global=global||self,global["util/encode"]=factory())}(this,function(){'use strict';var _reQuot=/"/g,_reApos=/'/g,encodeHTML=function(html){return document.createElement("a").appendChild(document.createTextNode(html)).parentNode.innerHTML};return{html:encodeHTML,attribute:function(html){return encodeHTML(html).replace(_reQuot,"&quot;").replace(_reApos,"&apos;")},encodeBase64:function(str){return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g,function(match,p1){return String.fromCharCode("0x"+p1)}))},decodeBase64:function(str){return decodeURIComponent(Array.prototype.map.call(atob(str),function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}}),define("taoTaskQueue/controller/main",["jquery","taoTaskQueue/component/manager/manager","ui/taskQueue/taskQueue"],function($,taskQueueManagerFactory,taskQueue){'use strict';return{start:function start(){var taskManager=taskQueueManagerFactory({replace:!0}).on("remove",function(taskId){return taskQueue.archive(taskId)}).on("report",function(taskId){taskQueue.get(taskId).then(function(task){return taskManager.showDetail(task)})}).on("download",function(taskId){return taskQueue.download(taskId)}).on("redirect",function(taskId){return taskQueue.redirect(taskId)}).on("listclearfinished",function(){taskQueue.pollAllStop().archive("all").then(function(){return taskQueue.pollAll()})}).render($("#taskqueue").parent()).hide();taskQueue.on("taskcreated",function(data){taskManager.list.is("hidden")?taskManager.absorbBurst(data.sourceDom,[0,300,600]).then(function(){taskManager.addNewTask(data.task),taskQueue.pollAll()}):(taskManager.addNewTask(data.task,!0),taskQueue.pollAll())}).on("multitaskstatuschange",function(){return taskManager.pulse()}).on("pollAll",function(tasks){taskManager.is("hidden")&&taskManager.show(),taskManager.loadData(tasks)}).pollAll(!0)}}}),define("taoTaskQueue/controller/routes",[],function(){'use strict';return{Main:{actions:{index:"taoTaskQueue/controller/main"}}}}),function(c){var d=document,s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0].appendChild(s),s.styleSheet?s.styleSheet.cssText=c:s.appendChild(d.createTextNode(c))}("div.task-element{position:relative;background:#f3f1ef;padding:10px 20px;width:100%;height:70px;-webkit-transition:background, 2s, ease-out, 0s;-moz-transition:background, 2s, ease-out, 0s;-ms-transition:background, 2s, ease-out, 0s;-o-transition:background, 2s, ease-out, 0s;transition:background, 2s, ease-out, 0s}div.task-element.highlight{background:white;-webkit-transition:background, 0s, ease-out, 0s;-moz-transition:background, 0s, ease-out, 0s;-ms-transition:background, 0s, ease-out, 0s;-o-transition:background, 0s, ease-out, 0s;transition:background, 0s, ease-out, 0s}div.task-element .container-icon{position:absolute}div.task-element .container-icon .shape{display:inline-block;border-radius:50%;width:40px;height:40px;top:2px;position:relative}div.task-element .container-icon .shape [class^=\"icon-\"],div.task-element .container-icon .shape [class*=\" icon-\"]{font-size:20px;font-size:2rem;position:relative;top:9px;left:12px;text-shadow:none}div.task-element .container-icon .shape .icon-export,div.task-element .container-icon .shape .icon-import,div.task-element .container-icon .shape .icon-connect{left:10px}div.task-element .container-icon .shape .icon-property-advanced,div.task-element .container-icon .shape .icon-result-ok,div.task-element .container-icon .shape .icon-result-nok{top:10px;left:10px}div.task-element.in_progress .container-icon .shape{background:#0e5d91}div.task-element.in_progress .container-icon .shape [class^=\"icon-\"],div.task-element.in_progress .container-icon .shape [class*=\" icon-\"]{color:#e7eff4}div.task-element.in_progress .action-group.action-bottom [data-role=\"notify\"]{display:none}div.task-element.in_progress .action-group.action-top [data-role=\"remove\"]{display:none}div.task-element.completed .container-icon .shape{background:#0e914b}div.task-element.completed .container-icon .shape [class^=\"icon-\"],div.task-element.completed .container-icon .shape [class*=\" icon-\"]{color:#e7f4ed}div.task-element.completed .action-group.action-bottom [data-role=\"download\"],div.task-element.completed .action-group.action-bottom [data-role=\"report\"],div.task-element.completed .action-group.action-bottom [data-role=\"redirect\"]{display:inline-block}div.task-element.failed .container-icon .shape{background:#ba122b}div.task-element.failed .container-icon .shape [class^=\"icon-\"],div.task-element.failed .container-icon .shape [class*=\" icon-\"]{color:#f8e7ea}div.task-element.failed .action-group.action-bottom [data-role=\"download\"],div.task-element.failed .action-group.action-bottom [data-role=\"report\"],div.task-element.failed .action-group.action-bottom [data-role=\"redirect\"]{display:inline-block}div.task-element .container-text{padding-top:0px;margin-left:60px;width:240px}div.task-element .container-text .label{min-height:22px;max-height:38px;overflow:hidden;color:#222}div.task-element .container-text .time{color:#92918f;font-size:12px;font-size:1.2rem}div.task-element .action-group{position:absolute}div.task-element .action-group [class^=\"icon-\"],div.task-element .action-group [class*=\" icon-\"]{font-size:16px;font-size:1.6rem;background-color:transparent;width:20px;height:20px;display:inline-block;padding-left:4px;margin-left:5px;cursor:pointer}div.task-element .action-group [class^=\"icon-\"]:hover,div.task-element .action-group [class*=\" icon-\"]:hover{opacity:0.6}div.task-element .action-group.action-top{top:6px;right:14px}div.task-element .action-group.action-bottom{bottom:6px;right:12px}div.task-element .action-group.action-bottom [class^=\"icon-\"],div.task-element .action-group.action-bottom [class*=\" icon-\"]{display:none}\n\n/*# sourceMappingURL=element.css.map */div.task-detail-element{position:relative;padding:10px 20px;width:600px;min-height:250px;background:#f3f1ef}div.task-detail-element .detail-description .label{margin-right:4px;color:#222;font-weight:bold}div.task-detail-element .detail-description .time{margin-left:4px;color:#92918f;font-size:12px;font-size:1.2rem}div.task-detail-element .detail-body{max-height:500px;overflow-y:auto;padding:10px 0}div.task-detail-element .action-top{position:absolute;top:9px;right:14px}div.task-detail-element .action-top [class^=\"icon-\"],div.task-detail-element .action-top [class*=\" icon-\"]{font-size:16px;font-size:1.6rem;color:#222;background-color:transparent;width:20px;height:20px;display:inline-block;padding-left:4px;margin-left:5px;cursor:pointer}div.task-detail-element .action-top [class^=\"icon-\"]:hover,div.task-detail-element .action-top [class*=\" icon-\"]:hover{opacity:0.6}div.task-detail-element .no-detail{display:none}div.task-detail-element.noreport .no-detail{display:block;color:#92918f}\n\n/*# sourceMappingURL=report.css.map */div.task-listing{position:relative;cursor:default;padding-top:0px}div.task-listing div.box{position:relative;min-height:76px;min-width:360px;background:#f3f1ef;-webkit-box-shadow:0 3px 6px 0px rgba(0,0,0,0.6);-moz-box-shadow:0 3px 6px 0px rgba(0,0,0,0.6);-ms-box-shadow:0 3px 6px 0px rgba(0,0,0,0.6);-o-box-shadow:0 3px 6px 0px rgba(0,0,0,0.6);box-shadow:0 3px 6px 0px rgba(0,0,0,0.6);border:1px solid #ddd;border-radius:2px;-webkit-border-radius:2px}div.task-listing div.box .description{padding:2px 20px;background:#dbd9d7;color:#222;font-weight:bold;border-bottom:solid 1px #ddd;min-height:8px}div.task-listing div.box .arrow{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);border:1px #ddd solid;border-right:none;border-bottom:none;width:16px;height:16px;background:#dbd9d7;color:#222;position:absolute;right:14px;top:-9px}div.task-listing div.box ul.task-list{position:relative;top:0;left:0;right:0;opacity:1;padding:0 !important;border:none;max-height:460px;overflow:auto;background:#c2c1bf;position:relative}div.task-listing div.box ul.task-list li{position:relative;width:100%;max-height:100px;color:#222;background:#c2c1bf}div.task-listing div.box ul.task-list li:not(:last-child){border-bottom:solid 1px #dbd9d7}div.task-listing div.box ul.task-list li.inserting{max-height:0;-webkit-transition:max-height, .5s, ease-out, 0s;-moz-transition:max-height, .5s, ease-out, 0s;-ms-transition:max-height, .5s, ease-out, 0s;-o-transition:max-height, .5s, ease-out, 0s;transition:max-height, .5s, ease-out, 0s}div.task-listing div.box ul.task-list li.inserting .task-element{height:0px}div.task-listing div.box ul.task-list li.inserted{min-height:70px}div.task-listing div.box ul.task-list li .task-element{transform:scaleY(1);-webkit-transition:scaleY, .6s, ease-out, 0s;-moz-transition:scaleY, .6s, ease-out, 0s;-ms-transition:scaleY, .6s, ease-out, 0s;-o-transition:scaleY, .6s, ease-out, 0s;transition:scaleY, .6s, ease-out, 0s}div.task-listing div.box ul.task-list li .task-element.new-element{transform-origin:20% 0;transform:scaleY(0)}div.task-listing div.box .clear-box{text-align:center;border-top:solid 1px #ddd;background:#eceae8;padding:2px 0}div.task-listing div.box .clear-box .clear-all{text-decoration:none;color:#3e7da7}div.task-listing div.box .clear-box .clear-all:hover{text-decoration:underline;color:#0e5d91}div.task-listing div.box .empty-placeholder{width:100%;position:absolute;top:25px;padding:12px 20px;font-style:italic;color:#222}div.task-listing div.box .view-detail{display:none}div.task-listing.detail-view .box .task-list,div.task-listing.detail-view .box .clear-box{display:none}div.task-listing.detail-view .box .view-detail{display:block;position:relative}\n\n/*# sourceMappingURL=list.css.map */.task-manager-container{cursor:pointer;position:relative;width:40px;height:64px;background-color:transparent;padding:22px 8px 0px}.task-manager-container:hover{-webkit-transition:background-color 0.2s ease;-moz-transition:background-color 0.2s ease;-ms-transition:background-color 0.2s ease;-o-transition:background-color 0.2s ease;transition:background-color 0.2s ease;background-color:rgba(14,93,145,0.5);text-decoration:none}.dark-bar nav .settings-menu:hover ~ .persistent-menu .task-listing .box{box-shadow:none;border-color:#eee}.dark-bar nav .settings-menu:hover ~ .persistent-menu .task-listing .box .arrow{display:none}\n\n/*# sourceMappingURL=manager.css.map */"),define("taoTaskQueue/loader/taoTaskQueue.bundle",function(){});
//# sourceMappingURL=taoTaskQueue.min.js.map